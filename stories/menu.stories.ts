import type { Meta, StoryObj } from '@storybook/web-components';
import { html } from 'lit';
import '../src/components/navigation/lith-menu.js';
import '../src/components/navigation/lith-menu-item.js';

const meta: Meta = {
  title: 'Components/Menu',
  component: 'lith-menu',
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: `
## MenuÁªÑ‰ª∂

‰∏Ä‰∏™Êó†Ê†∑ÂºèÁöÑ‰∏ãÊãâËèúÂçïÁªÑ‰ª∂ÔºåÊèê‰æõÂÆåÊï¥ÁöÑ‰∫§‰∫íÈÄªËæëÂíåÂèØËÆøÈóÆÊÄßÊîØÊåÅ„ÄÇ

### ÁâπÊÄß

- **HeadlessËÆæËÆ°** - Êó†È¢ÑÂÆö‰πâÊ†∑ÂºèÔºåÂÆåÂÖ®ÂèØÂÆöÂà∂
- **ÈîÆÁõòÂØºËà™** - ÊîØÊåÅÊñπÂêëÈîÆ„ÄÅEnter„ÄÅSpace„ÄÅEscapeÁ≠âÈîÆÁõòÊìç‰Ωú
- **ÂèØËÆøÈóÆÊÄß** - ÈÅµÂæ™WCAGÊ†áÂáÜÔºåÊîØÊåÅÂ±èÂπïÈòÖËØªÂô®
- **‰∫ã‰ª∂Á≥ªÁªü** - ‰∏∞ÂØåÁöÑ‰∫ã‰ª∂ÊîØÊåÅÔºå‰æø‰∫éÈõÜÊàê
- **ÁÅµÊ¥ªÈÖçÁΩÆ** - ÊîØÊåÅÂ§öÁßçÈÖçÁΩÆÈÄâÈ°π

### ÈîÆÁõò‰∫§‰∫í

- **Enter/Space** - ÊâìÂºÄËèúÂçïÊàñÊøÄÊ¥ªÈ´ò‰∫ÆÈ°π
- **Escape** - ÂÖ≥Èó≠ËèúÂçïÂπ∂ËøîÂõûÁÑ¶ÁÇπÂà∞Ëß¶ÂèëÂô®
- **ArrowDown/ArrowUp** - ÂØºËà™ËèúÂçïÈ°π
- **Home/End** - Ë∑≥ËΩ¨Âà∞Á¨¨‰∏Ä‰∏™/ÊúÄÂêé‰∏Ä‰∏™ËèúÂçïÈ°π

### ‰∫ã‰ª∂

- \`lith-menu-item-click\` - ËèúÂçïÈ°πË¢´ÁÇπÂáªÊó∂Ëß¶Âèë
- \`lith-open\` - ËèúÂçïÊâìÂºÄÊó∂Ëß¶Âèë
- \`lith-close\` - ËèúÂçïÂÖ≥Èó≠Êó∂Ëß¶Âèë
- \`lith-focus\` - Ëß¶ÂèëÂô®Ëé∑ÂæóÁÑ¶ÁÇπÊó∂Ëß¶Âèë
- \`lith-blur\` - Ëß¶ÂèëÂô®Â§±ÂéªÁÑ¶ÁÇπÊó∂Ëß¶Âèë
        `,
      },
    },
  },
  argTypes: {
    open: {
      control: 'boolean',
      description: 'ËèúÂçïÊòØÂê¶ÊâìÂºÄ',
    },
    disabled: {
      control: 'boolean',
      description: 'ÊòØÂê¶Á¶ÅÁî®ËèúÂçï',
    },
    placement: {
      control: 'select',
      options: ['bottom-start', 'bottom-end', 'top-start', 'top-end'],
      description: 'ËèúÂçïÊòæÁ§∫‰ΩçÁΩÆ',
    },
    closeOnSelect: {
      control: 'boolean',
      description: 'ÈÄâÊã©È°πÁõÆÂêéÊòØÂê¶Ëá™Âä®ÂÖ≥Èó≠ËèúÂçï',
    },
  },
  args: {
    open: false,
    disabled: false,
    placement: 'bottom-start',
    closeOnSelect: true,
  },
};

export default meta;
type Story = StoryObj;

export const Default: Story = {
  render: (args) => html`
    <lith-menu
      ?open=${args.open}
      ?disabled=${args.disabled}
      placement=${args.placement}
      ?close-on-select=${args.closeOnSelect}
      style="
        --lith-menu-trigger-padding: 12px 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: white;
        color: #333;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --lith-menu-max-height: 200px;
        --lith-menu-z-index: 1000;
      "
    >
      <span slot="trigger">Actions</span>
      <span slot="trigger-icon">‚ñº</span>

      <lith-menu-item
        value="edit"
        style="
          --lith-menu-item-padding: 8px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Edit
      </lith-menu-item>
      <lith-menu-item
        value="copy"
        style="
          --lith-menu-item-padding: 8px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Copy
      </lith-menu-item>
      <lith-menu-item
        value="delete"
        style="
          --lith-menu-item-padding: 8px 16px;
          background: white;
          color: #dc3545;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Delete
      </lith-menu-item>
    </lith-menu>
  `,
};

export const WithIcons: Story = {
  render: (args) => html`
    <lith-menu
      ?open=${args.open}
      ?disabled=${args.disabled}
      placement=${args.placement}
      ?close-on-select=${args.closeOnSelect}
      style="
        --lith-menu-trigger-padding: 12px 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: white;
        color: #333;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --lith-menu-max-height: 250px;
      "
    >
      <span slot="trigger">More Actions</span>
      <span slot="trigger-icon">‚ãÆ</span>

      <lith-menu-item
        value="share"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        <span slot="icon">üì§</span>
        Share
      </lith-menu-item>
      <lith-menu-item
        value="download"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        <span slot="icon">‚¨áÔ∏è</span>
        Download
      </lith-menu-item>
      <lith-menu-item
        value="favorite"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        <span slot="icon">‚≠ê</span>
        Add to Favorites
      </lith-menu-item>
      <lith-menu-item
        value="settings"
        style="
          --lith-menu-item-padding: 10px 16px;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        <span slot="icon">‚öôÔ∏è</span>
        Settings
      </lith-menu-item>
    </lith-menu>
  `,
};

export const WithLinks: Story = {
  render: (args) => html`
    <lith-menu
      ?open=${args.open}
      ?disabled=${args.disabled}
      placement=${args.placement}
      ?close-on-select=${args.closeOnSelect}
      style="
        --lith-menu-trigger-padding: 12px 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: white;
        color: #333;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --lith-menu-max-height: 200px;
      "
    >
      <span slot="trigger">Navigation</span>
      <span slot="trigger-icon">‚ñº</span>

      <lith-menu-item
        value="home"
        href="/"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Home
      </lith-menu-item>
      <lith-menu-item
        value="about"
        href="/about"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        About
      </lith-menu-item>
      <lith-menu-item
        value="contact"
        href="/contact"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Contact
      </lith-menu-item>
      <lith-menu-item
        value="external"
        href="https://example.com"
        target="_blank"
        style="
          --lith-menu-item-padding: 10px 16px;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        External Link
        <span slot="suffix">‚Üó</span>
      </lith-menu-item>
    </lith-menu>
  `,
};

export const Disabled: Story = {
  args: {
    disabled: true,
  },
  render: (args) => html`
    <lith-menu
      ?open=${args.open}
      ?disabled=${args.disabled}
      placement=${args.placement}
      ?close-on-select=${args.closeOnSelect}
      style="
        --lith-menu-trigger-padding: 12px 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: #f5f5f5;
        color: #999;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      "
    >
      <span slot="trigger">Disabled Menu</span>
      <span slot="trigger-icon">‚ñº</span>

      <lith-menu-item value="item1">Item 1</lith-menu-item>
      <lith-menu-item value="item2">Item 2</lith-menu-item>
    </lith-menu>
  `,
};

export const WithDisabledItems: Story = {
  render: (args) => html`
    <lith-menu
      ?open=${args.open}
      ?disabled=${args.disabled}
      placement=${args.placement}
      ?close-on-select=${args.closeOnSelect}
      style="
        --lith-menu-trigger-padding: 12px 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: white;
        color: #333;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      "
    >
      <span slot="trigger">Mixed Menu</span>
      <span slot="trigger-icon">‚ñº</span>

      <lith-menu-item
        value="available"
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Available Item
      </lith-menu-item>
      <lith-menu-item
        value="disabled"
        disabled
        style="
          --lith-menu-item-padding: 10px 16px;
          border-bottom: 1px solid #eee;
          background: white;
          opacity: 0.5;
        "
      >
        Disabled Item
      </lith-menu-item>
      <lith-menu-item
        value="another"
        style="
          --lith-menu-item-padding: 10px 16px;
          background: white;
        "
        @mouseover="${(e) => (e.target.style.background = '#f5f5f5')}"
        @mouseout="${(e) => (e.target.style.background = 'white')}"
      >
        Another Item
      </lith-menu-item>
    </lith-menu>
  `,
};

export const Interactive: Story = {
  render: (args) => {
    const handleMenuItemClick = (e: CustomEvent) => {
      console.log('Menu item clicked:', e.detail);
      alert(`Clicked: ${e.detail.value}`);
    };

    const handleOpen = () => {
      console.log('Menu opened');
    };

    const handleClose = () => {
      console.log('Menu closed');
    };

    return html`
      <lith-menu
        ?open=${args.open}
        ?disabled=${args.disabled}
        placement=${args.placement}
        ?close-on-select=${args.closeOnSelect}
        @lith-menu-item-click=${handleMenuItemClick}
        @lith-open=${handleOpen}
        @lith-close=${handleClose}
        style="
          --lith-menu-trigger-padding: 12px 16px;
          border: 1px solid #007bff;
          border-radius: 6px;
          background: white;
          color: #007bff;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          cursor: pointer;
        "
      >
        <span slot="trigger">Interactive Menu</span>
        <span slot="trigger-icon">‚ñº</span>

        <lith-menu-item
          value="action1"
          style="
            --lith-menu-item-padding: 10px 16px;
            border-bottom: 1px solid #eee;
            background: white;
          "
          @mouseover="${(e) => (e.target.style.background = '#e7f3ff')}"
          @mouseout="${(e) => (e.target.style.background = 'white')}"
        >
          Action 1
        </lith-menu-item>
        <lith-menu-item
          value="action2"
          style="
            --lith-menu-item-padding: 10px 16px;
            border-bottom: 1px solid #eee;
            background: white;
          "
          @mouseover="${(e) => (e.target.style.background = '#e7f3ff')}"
          @mouseout="${(e) => (e.target.style.background = 'white')}"
        >
          Action 2
        </lith-menu-item>
        <lith-menu-item
          value="action3"
          style="
            --lith-menu-item-padding: 10px 16px;
            background: white;
          "
          @mouseover="${(e) => (e.target.style.background = '#e7f3ff')}"
          @mouseout="${(e) => (e.target.style.background = 'white')}"
        >
          Action 3
        </lith-menu-item>
      </lith-menu>
      <p style="margin-top: 20px; font-size: 14px; color: #666;">
        ÁÇπÂáªËèúÂçïÈ°π‰ºöÊòæÁ§∫ÂºπÁ™óÔºåÂπ∂Âú®ÊéßÂà∂Âè∞ËæìÂá∫ËØ¶ÁªÜ‰ø°ÊÅØ„ÄÇ
      </p>
    `;
  },
};
